<nav class="bg-white shadow">
    <div class="mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <a href="{{ url_for('welcome') }}" class="text-blue-600 font-bold text-xl">Flask Dashboard</a>

            <!-- Mobile menu button -->
            <div class="sm:hidden">
                <button id="nav-toggle" class="text-gray-700 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>

            <!-- Desktop nav with if statements for active menu styling -->
            <!-- View users button -->
            <div id="nav-links" class="hidden sm:flex space-x-6 items-center">
                <a href="{{ url_for('users') }}"
                    class="flex items-center gap-1 {% if request.path == '/users' or request.path == '/' %}text-blue-600 font-semibold{% else %}text-gray-600 hover:text-blue-600{% endif %}">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18M3 12h18M3 17h18" />
                    </svg>
                    View Users
                </a>

                <!-- Add user button -->
                <a href="{{ url_for('add_user') }}"
                    class="flex items-center gap-1 {% if request.path == '/add' %}text-blue-600 font-semibold{% else %}text-gray-600 hover:text-blue-600{% endif %}">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                    </svg>
                    Add User
                </a>
            </div>
        </div>

        <!-- Mobile links with if statements for active menu styling -->
        <div id="mobile-nav" class="sm:hidden hidden mt-4 space-y-2">
            <!-- View users button -->
            <a href="{{ url_for('users') }}"
                class="block {% if request.path == '/users' or request.path == '/' %}text-blue-600 font-semibold{% else %}text-gray-600 hover:text-blue-600{% endif %}">View
                Users</a>
            <!-- Add user button -->
            <a href="{{ url_for('add_user') }}"
                class="block {% if request.path == '/add' %}text-blue-600 font-semibold{% else %}text-gray-600 hover:text-blue-600{% endif %}">Add
                User</a>
        </div>
    </div>
</nav>

<!-- Flash Messages -->
<div class="max-w-4xl mx-auto mt-8 space-y-2" aria-live="polite">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="flash-message flex items-start justify-between gap-3 p-3 text-base rounded shadow opacity-100 transition-opacity duration-500
          {% if category == 'success' %}bg-green-100 text-green-700
          {% else %}bg-blue-100 text-blue-700{% endif %}">
        <span class="grow">{{ message }}</span>
        <button type="button" class="shrink-0 text-gray-500 hover:text-gray-800" aria-label="Dismiss"
            onclick="this.closest('.flash-message').remove()">
            &times;
        </button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
</div>

<!-- JavaScript for mobile menu toggle -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.getElementById("nav-toggle");
        const links = document.getElementById("mobile-nav");
        toggle?.addEventListener("click", () => {
            links.classList.toggle("hidden");
        });
    });
</script>